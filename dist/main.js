(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var t="element__like_active",n=function(){function n(e,i){var r,o,a=this,l=e.title,s=e.src;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=function(e){a._likeButton.classList.contains("element__like")&&(a._likeButton.classList.contains(t)?a._likeButton.classList.remove(t):a._likeButton.classList.add(t))},(r="_likeClickHandler")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this._title=l,this._src=s,this._clickCallback=function(){},this._element=document.querySelector(i).content.querySelector(".element").cloneNode(!0);var u=this._element.querySelector(".element__footer"),c=this._element.querySelector(".element__img"),p=u.querySelector(".element__title");c.setAttribute("src",s),c.setAttribute("alt",l),p.textContent=l,c.addEventListener("click",(function(){a._clickCallback(a._src)})),this._likeButton=this._element.querySelector(".element__like"),this._likeButton.addEventListener("click",this._likeClickHandler)}var i,r;return i=n,(r=[{key:"onClick",value:function(e){this._clickCallback=e}},{key:"render",value:function(){return this._element}}])&&e(i.prototype,r),Object.defineProperty(i,"prototype",{writable:!1}),n}();function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=function(){function e(t,n,i){var r,o,a=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o=function(){var e=a.inputElement.value;a._clearErrors();var t=a._validator.validate(e);t&&(a.inputElement.classList.add(a.invalidClassName),a._renderErrors(t)),a._chooseSubmitState()},(r="_handleInputChange")in this?Object.defineProperty(this,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):this[r]=o,this.inputElement=t,this._validator=n,this.invalidClassName="popup__input_invalid",this._chooseSubmitState=i,t.addEventListener("input",this._handleInputChange)}var t,n;return t=e,(n=[{key:"_renderErrors",value:function(e){var t=document.createElement("div");t.className="popup__error popup__error--".concat(this.inputElement.name),t.innerHTML=e,this.inputElement.parentElement.insertBefore(t,this.inputElement.nextSibling)}},{key:"_clearErrors",value:function(){var e=document.querySelectorAll(".popup__error--".concat(this.inputElement.name));this.inputElement.classList.remove(this.invalidClassName),e.forEach((function(e){e.remove()}))}}])&&i(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.validationRules=t}var t,n;return t=e,(n=[{key:"validate",value:function(e){return this.validationRules.isRequired&&!function(e){return e.length>0}(e)?this.validationRules.empty.message:this.validationRules.minLength&&!function(e,t){return!(e.length<t)}(e,this.validationRules.minLength.length)?this.validationRules.minLength.message:this.validationRules.maxLength&&!function(e,t){return!(e.length>t)}(e,this.validationRules.maxLength.length)?this.validationRules.maxLength.message:this.validationRules.regExp&&(t=e,n=this.validationRules.regExp.rule,null===t.match(n))?this.validationRules.regExp.text:void 0;var t,n}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(t){var n=this,i=t.onSubmit,o=t.rules,l=t.config,s=t.inputErrorClassName;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onSubmit=i,this.rules=o,this._form=document.querySelector(l.formSelector),this.inputClassName=this._form.querySelectorAll(l.inputClassNameSelector),this.inputErrorClassName=s,this.submitSelector=l.submitSelector,this.chooseSubmitButtonStateCb=function(){return n.chooseSubmitButtonState(n._form)},this._inputManagers=this.inputClassName.forEach((function(e){new r(e,new a(o[e.name]),n.chooseSubmitButtonStateCb)})),this._form.addEventListener("submit",(function(e){e.preventDefault(),n._form.querySelector(".popup__input_invalid")||n.onSubmit(n.inputClassName)}))}var t,n;return t=e,(n=[{key:"chooseSubmitButtonState",value:function(e){var t=e.querySelector(".popup__input_invalid");e.querySelector(this.submitSelector).disabled=!!t}}])&&l(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var c=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.POPUP_OPEN_CLASS="popup_active",this._popupElement=t,t.querySelector(".popup__close").addEventListener("click",(function(){n.closePopup()}))}var t,n;return t=e,(n=[{key:"openPopup",value:function(){this._popupElement.classList.add(this.POPUP_OPEN_CLASS)}},{key:"closePopup",value:function(){this._popupElement.classList.remove(this.POPUP_OPEN_CLASS)}}])&&u(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),p=[2,3,5].map((function(e){return 2*e}));console.log(p);var m="#element-template",h=document.querySelector(".popup_view"),f=h.querySelector(".popup__img"),_=document.querySelector(".elements"),v=new c(h);function d(e){f.src=e,v.openPopup()}[{title:"Карачаевск",src:"./images/1.png"},{title:"Гора Эльбрус",src:"./images/2.png"},{title:"Домбай",src:"./images/3.png"},{title:"Гора Эльбрус",src:"./images/2.png"},{title:"Домбай",src:"./images/3.png"},{title:"Карачаево-Черкесская Республика",src:"./images/1.png"}].forEach((function(e){var t=new n(e,m);t.onClick(d),_.append(t.render())}));var b=document.querySelector(".popup_edit"),g=document.querySelector(".profile__edit"),y=new c(b);g.addEventListener("click",(function(){y.openPopup()}));var S=document.querySelector(".profile__name"),E=document.querySelector(".profile__subtitle"),k=document.querySelector(".popup_add"),w=document.querySelector(".profile__add"),C=new c(k);w.addEventListener("click",(function(){C.openPopup()})),new s({onSubmit:function(e){S.textContent=e[0].value,E.textContent=e[1].value,y.closePopup()},rules:{title:{isRequired:!0,empty:{message:"Укажите имя"},minLength:{length:3,message:"Имя слишком короткое"},maxLength:{length:20,message:"Имя слишком длинное"}},subtitle:{isRequired:!0,empty:{message:"Укажите профессию"},minLength:{length:3,message:"Название слишком короткое"}}},config:{formSelector:".form__edit",inputClassNameSelector:".popup__input",inputErrorClassName:"popup__error",submitSelector:".popup__save"}}),new s({onSubmit:function(e){var t={title:"",src:""};t.title=e[0].value,t.src=e[1].value;var i=new n(t,m);i.onClick(d),_.append(i.render),C.closePopup()},rules:{title:{isRequired:!0,empty:{message:"Укажите название места"},minLength:{length:3,message:"Название слишком короткое"}},browse:{isRequired:!0,empty:{message:"Укажите адрес изображения"},regExp:{rule:/(http(s)?:\/\/.)?(www\.)?[-a-zA-Z0-9@:%._\+~#=]{2,256}\.[a-z]{2,6}\b([-a-zA-Z0-9@:%_\+.~#?&//=]*)/g,message:"Попробуйте начать с https"}}},config:{formSelector:".form__add",inputClassNameSelector:".popup__input",inputErrorClassName:"popup__error",submitSelector:".popup__save"}})})();